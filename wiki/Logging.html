<h2>
<a id="user-content-an-implementation-free-logging-api-for-net" class="anchor" href="#an-implementation-free-logging-api-for-net" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>An implementation-free logging API for .Net</h2>

<p><strong>ServiceStack.Logging</strong> is an implementation and dependency-free logging API with adapters for all of .NET's popular logging providers.
It allows your business logic to bind to an easily-mockable and testable dependency-free interface whilst providing the flexibility to switch logging providers at runtime.</p>

<h2>
<a id="user-content-download-on-nuget" class="anchor" href="#download-on-nuget" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Download on NuGet</h2>

<p>Currently there are 5 different .NET logging providers available on NuGet:</p>

<h4>
<a id="user-content-install-package-servicestackloggingnlog" class="anchor" href="#install-package-servicestackloggingnlog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install-Package <a href="https://nuget.org/packages/ServiceStack.Logging.NLog">ServiceStack.Logging.NLog</a>
</h4>

<h4>
<a id="user-content-install-package-servicestackloggingelmah" class="anchor" href="#install-package-servicestackloggingelmah" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install-Package <a href="https://nuget.org/packages/ServiceStack.Logging.Elmah">ServiceStack.Logging.Elmah</a>
</h4>

<h4>
<a id="user-content-install-package-servicestacklogginglog4net" class="anchor" href="#install-package-servicestacklogginglog4net" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install-Package <a href="https://nuget.org/packages/ServiceStack.Logging.Log4Net">ServiceStack.Logging.Log4Net</a>
</h4>

<h4>
<a id="user-content-install-package-servicestacklogginglog4netv129" class="anchor" href="#install-package-servicestacklogginglog4netv129" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install-Package <a href="https://nuget.org/packages/ServiceStack.Logging.Log4Netv129">ServiceStack.Logging.Log4Netv129</a>
</h4>

<h4>
<a id="user-content-install-package-servicestackloggingeventlog" class="anchor" href="#install-package-servicestackloggingeventlog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install-Package <a href="https://nuget.org/packages/ServiceStack.Logging.EventLog">ServiceStack.Logging.EventLog</a>
</h4>

<p>Note: The ConsoleLogger and DebugLogger and are already built-in and bind to .NET Framework's Console and Debug loggers</p>

<hr>

<p>Even in the spirit of <strong>Bind to interfaces, not implemenations</strong>, many .NET projects still have
a hard dependency to <a href="http://logging.apache.org/log4net/index.html">log4net</a>. </p>

<p>Although log4net is the standard for logging in .NET, potential problems can arise from your libraries having a hard dependency on it:</p>

<ul>
<li>Your library needs to be shipped with a third-party dependency</li>
<li>Potential conflicts can occur when different libraries have dependency on different versions of log4net (e.g. the 1.2.9 / 1.2.10 dependency problem).</li>
<li>You may want to use a different logging provider (i.e. network distributed logging)</li>
<li>You want your logging for Unit and Integration tests to redirect to the Console or Debug logger without any configuraiton.</li>
<li>Something better like <a href="http://code.google.com/p/elmah/">elmah</a> can come along requiring a major rewrite to take advantage of it</li>
</ul>

<p>ServiceStack.Logging solves these problems by providing an implementation-free ILog interface that your application logic can bind to 
where your Application Host project can bind to the concrete logging implementation at deploy or runtime.</p>

<p>ServiceStack.Logging also includes adapters for the following logging providers:</p>

<ul>
<li>Elmah</li>
<li>NLog</li>
<li>Log4Net 1.2.10+</li>
<li>Log4Net 1.2.9</li>
<li>EventLog</li>
<li>Console Log</li>
<li>Debug Log</li>
<li>Null / Empty Log</li>
</ul>

<h1>
<a id="user-content-registration-examples" class="anchor" href="#registration-examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Registration Examples</h1>

<p>Once on your App Startup, either In your <code>AppHost.cs</code> or <code>Global.asax</code> file inject the concrete logging implementation that your app should use, e.g.</p>

<h2>
<a id="user-content-built-in-loggers" class="anchor" href="#built-in-loggers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Built-in Loggers</h2>

<div class="highlight highlight-source-cs"><pre><span class="pl-c">//Console.WriteLine</span>
LogManager.LogFactory = <span class="pl-k">new</span> ConsoleLogFactory(debugEnabled:<span class="pl-c1">true</span>); 
<span class="pl-c">//Debug.WriteLine</span>
LogManager.LogFactory = <span class="pl-k">new</span> DebugLogFactory(debugEnabled:<span class="pl-c1">true</span>);   
<span class="pl-c">//Capture logs in StringBuilder</span>
LogManager.LogFactory = <span class="pl-k">new</span> StringBuilderLogFactory(); 
<span class="pl-c">//No Logging (default)</span>
LogManager.LogFactory = <span class="pl-k">new</span> NullLogFactory();   </pre></div>

<h2>
<a id="user-content-nlog" class="anchor" href="#nlog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NLog</h2>

<div class="highlight highlight-source-cs"><pre>LogManager.LogFactory = <span class="pl-k">new</span> NLogFactory(); </pre></div>

<h2>
<a id="user-content-log4net" class="anchor" href="#log4net" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Log4Net</h2>

<div class="highlight highlight-source-cs"><pre><span class="pl-c">//Also runs log4net.Config.XmlConfigurator.Configure()</span>
LogManager.LogFactory = <span class="pl-k">new</span> Log4NetFactory(configureLog4Net:<span class="pl-c1">true</span>); </pre></div>

<h2>
<a id="user-content-event-log" class="anchor" href="#event-log" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Event Log</h2>

<div class="highlight highlight-source-cs"><pre>LogManager.LogFactory = <span class="pl-k">new</span> EventLogFactory(<span class="pl-s"><span class="pl-pds">"</span>Logging.Tests<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Application<span class="pl-pds">"</span></span>);</pre></div>

<p>Then your application logic can bind to and use a lightweight implementation-free ILog which at runtime will be an instance of the concrete implementation configured in your host:</p>

<div class="highlight highlight-source-cs"><pre>ILog log = LogManager.GetLogger(GetType());

log.Debug(<span class="pl-s"><span class="pl-pds">"</span>Debug Event Log Entry.<span class="pl-pds">"</span></span>);
log.Warn(<span class="pl-s"><span class="pl-pds">"</span>Warning Event Log Entry.<span class="pl-pds">"</span></span>);</pre></div>

<h2>
<a id="user-content-elmah" class="anchor" href="#elmah" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Elmah</h2>

<p>To configure Elmah register it before initializing ServiceStack's AppHost, passing in the Global HttpApplication Instance and an alternate logger you'd like to use to for your Debug and Info messages, e.g:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Global</span> : <span class="pl-k">System</span>.<span class="pl-k">Web</span>.<span class="pl-k">HttpApplication</span>
{
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">Application_Start</span>(<span class="pl-k">object</span> <span class="pl-smi">sender</span>, <span class="pl-k">EventArgs</span> <span class="pl-smi">e</span>)
    {
        <span class="pl-k">var</span> debugMessagesLog = <span class="pl-k">new</span> ConsoleLogFactory();
        LogManager.LogFactory = <span class="pl-k">new</span> ElmahLogFactory(debugMessagesLog, <span class="pl-c1">this</span>);
        <span class="pl-k">new</span> AppHost().Init();
    }
}</pre></div>

<p>Elmah also requires its handlers and modules to be registered in the <strong>Web.config</strong> which lets you view your Elmah Error Log at: <code>/elmah.xsd</code>:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">configuration</span>&gt;
  &lt;<span class="pl-ent">system</span>.web&gt;
    ...
    &lt;<span class="pl-ent">httpHandlers</span>&gt;
      &lt;<span class="pl-ent">add</span> <span class="pl-e">verb</span>=<span class="pl-s"><span class="pl-pds">"</span>POST,GET,HEAD<span class="pl-pds">"</span></span> <span class="pl-e">path</span>=<span class="pl-s"><span class="pl-pds">"</span>elmah.axd<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah.ErrorLogPageFactory, Elmah<span class="pl-pds">"</span></span> /&gt;
    &lt;/<span class="pl-ent">httpHandlers</span>&gt;
    &lt;<span class="pl-ent">httpModules</span>&gt;
      &lt;<span class="pl-ent">add</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>ErrorLog<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah.ErrorLogModule, Elmah<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">httpModules</span>&gt;
  &lt;/<span class="pl-ent">system</span>.web&gt;

  &lt;<span class="pl-ent">system</span>.webServer&gt;
    &lt;<span class="pl-ent">handlers</span>&gt;
      ...
      &lt;<span class="pl-ent">add</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah<span class="pl-pds">"</span></span> <span class="pl-e">path</span>=<span class="pl-s"><span class="pl-pds">"</span>elmah.axd<span class="pl-pds">"</span></span> <span class="pl-e">verb</span>=<span class="pl-s"><span class="pl-pds">"</span>POST,GET,HEAD<span class="pl-pds">"</span></span> 
           <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah.ErrorLogPageFactory, Elmah<span class="pl-pds">"</span></span> <span class="pl-e">preCondition</span>=<span class="pl-s"><span class="pl-pds">"</span>integratedMode<span class="pl-pds">"</span></span> /&gt;
    &lt;/<span class="pl-ent">handlers</span>&gt;
    &lt;<span class="pl-ent">modules</span>&gt;
      &lt;<span class="pl-ent">add</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah.ErrorLog<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Elmah.ErrorLogModule, Elmah<span class="pl-pds">"</span></span> <span class="pl-e">preCondition</span>=<span class="pl-s"><span class="pl-pds">"</span>managedHandler<span class="pl-pds">"</span></span> /&gt;
    &lt;/<span class="pl-ent">modules</span>&gt;
  &lt;/<span class="pl-ent">system</span>.webServer&gt;

&lt;/<span class="pl-ent">configuration</span>&gt;</pre></div>

<p>For a working example see the <a href="https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/Logging.Elmah">Logging.Elmah UseCase</a> which has ServiceStack and Elmah configured together.</p>

<h1>
<a id="user-content-usage-example" class="anchor" href="#usage-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage Example</h1>

<p>Using a logger in your Service is similar to other .NET Logging providers, e.g. you can initialize a static property for the class and use it in your services, e.g:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyService</span> : <span class="pl-k">Service</span>
{
    <span class="pl-k">public</span> <span class="pl-k">static</span> ILog Log = LogManager.GetLogger(<span class="pl-k">typeof</span>(MyService));

    <span class="pl-k">public</span> <span class="pl-k">object</span> <span class="pl-en">Any</span>(<span class="pl-k">Request</span> <span class="pl-smi">request</span>)
    {
        <span class="pl-k">if</span> (Log.IsDebugEnabled)
            Log.Debug(<span class="pl-s"><span class="pl-pds">"</span>In Request Service<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<h1>
<a id="user-content-community-resources" class="anchor" href="#community-resources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Community Resources</h1>

<ul>
<li>
<a href="http://buildclassifieds.com/2016/02/01/using-slack-for-logging-with-servicestack/">Using Slack for Logging (with ServiceStack)</a> by <a href="https://twitter.com/markholdt">@markholdt</a>
</li>
<li>
<a href="http://rossipedia.com/blog/2013/03/elmah-emails-and-servicestack/">Elmah, Emails, and ServiceStack</a> by <a href="https://twitter.com/rossipedia">@rossipedia</a>
</li>
</ul>
