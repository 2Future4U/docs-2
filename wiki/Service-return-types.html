<p>From a birds-eye view ServiceStack can return any of:</p>

<ul>
<li>Any DTO object -&gt; serialized to Response ContentType</li>
<li>HttpResult, HttpError, CompressedResult (IHttpResult) for Customized HTTP response</li>
</ul>

<h2>
<a id="user-content-different-return-types" class="anchor" href="#different-return-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Different Return Types</h2>

<p>The following types are not converted (to different Content-Types) but get written directly to the Response Stream:</p>

<ul>
<li><code>String</code></li>
<li><code>Stream</code></li>
<li><code>IStreamWriter</code></li>
<li>
<code>byte[]</code> - with the <code>application/octet-stream</code> Content Type.</li>
</ul>

<p>From the <a href="https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/HelloWorld/Global.asax.cs">HelloWorld ServiceStack.UseCase</a> demo:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">HelloService</span> : <span class="pl-k">Service</span>
{
    <span class="pl-k">public</span> HelloResponse <span class="pl-en">Get</span>(<span class="pl-k">Hello</span> <span class="pl-smi">request</span>)
    {
        <span class="pl-k">return</span> <span class="pl-k">new</span> HelloResponse { Result = <span class="pl-s"><span class="pl-pds">"</span>Hello, {0}!<span class="pl-pds">"</span></span>.Fmt(request.Name) };

        <span class="pl-c">//C# client can call with:</span>
        <span class="pl-c">//var response = client.Get(new Hello { Name = "ServiceStack" });</span>
    }

    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">Get</span>(<span class="pl-k">HelloHtml</span> <span class="pl-smi">request</span>)
    {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;Hello, {0}!&lt;/h1&gt;<span class="pl-pds">"</span></span>.Fmt(request.Name);
    }

    [AddHeader(ContentType = <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">Get</span>(<span class="pl-k">HelloText</span> <span class="pl-smi">request</span>)
    {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;Hello, {0}!&lt;/h1&gt;<span class="pl-pds">"</span></span>.Fmt(request.Name);
    }

    [AddHeader(ContentType = <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> Stream <span class="pl-en">Get</span>(<span class="pl-k">HelloImage</span> <span class="pl-smi">request</span>)
    {
        <span class="pl-k">var</span> width = request.Width.GetValueOrDefault(<span class="pl-c1">640</span>);
        <span class="pl-k">var</span> height = request.Height.GetValueOrDefault(<span class="pl-c1">360</span>);
        <span class="pl-k">var</span> bgColor = request.Background != <span class="pl-c1">null</span> ? Color.FromName(request.Background) : Color.ForestGreen;
        <span class="pl-k">var</span> fgColor = request.Foreground != <span class="pl-c1">null</span> ? Color.FromName(request.Foreground) : Color.White;

        <span class="pl-k">var</span> image = <span class="pl-k">new</span> Bitmap(width, height);
        <span class="pl-k">using</span> (<span class="pl-k">var</span> g = Graphics.FromImage(image))
        {
            g.Clear(bgColor);

            <span class="pl-k">var</span> drawString = <span class="pl-s"><span class="pl-pds">"</span>Hello, {0}!<span class="pl-pds">"</span></span>.Fmt(request.Name);
            <span class="pl-k">var</span> drawFont = <span class="pl-k">new</span> Font(<span class="pl-s"><span class="pl-pds">"</span>Times<span class="pl-pds">"</span></span>, request.FontSize.GetValueOrDefault(<span class="pl-c1">40</span>));
            <span class="pl-k">var</span> drawBrush = <span class="pl-k">new</span> SolidBrush(fgColor);
            <span class="pl-k">var</span> drawRect = <span class="pl-k">new</span> RectangleF(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, width, height);

            <span class="pl-k">var</span> drawFormat = <span class="pl-k">new</span> StringFormat {
                LineAlignment = StringAlignment.Center,
                Alignment = StringAlignment.Center };

            g.DrawString(drawString, drawFont, drawBrush, drawRect, drawFormat);

            <span class="pl-k">var</span> ms = <span class="pl-k">new</span> MemoryStream();
            image.Save(ms, ImageFormat.Png);
            <span class="pl-k">return</span> ms;
        }
    }
}</pre></div>

<h4>
<a id="user-content-live-examples-of-the-above-hello-service" class="anchor" href="#live-examples-of-the-above-hello-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Live Examples of the above Hello Service:</h4>

<ul>
<li>
<a href="http://bootstrapapi.apphb.com/api/hello/ServiceStack">/hello/ServiceStack</a>

<ul>
<li><a href="http://bootstrapapi.apphb.com/api/hello/ServiceStack?format=json">/hello/ServiceStack?format=json</a></li>
</ul>
</li>
<li><a href="http://bootstrapapi.apphb.com/api/hellotext/ServiceStack">/hellotext/ServiceStack</a></li>
<li><a href="http://bootstrapapi.apphb.com/api/hellohtml/ServiceStack">/hellohtml/ServiceStack</a></li>
<li><a href="http://bootstrapapi.apphb.com/api/helloimage/ServiceStack?Width=600&amp;height=300&amp;Foreground=Yellow">/helloimage/ServiceStack?Width=600&amp;height=300&amp;Foreground=Yellow</a></li>
</ul>

<h2>
<a id="user-content-partial-content-support" class="anchor" href="#partial-content-support" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Partial Content Support</h2>

<p>Partial Content Support allows a resource to be split up an accessed in multiple chunks for clients that support HTTP Range Requests. This is a popular feature in download managers for resuming downloads of large files and streaming services for real-time streaming of content (e.g. consumed whilst it's being watched or listened to).</p>

<p><a href="http://benramsey.com/blog/2008/05/206-partial-content-and-range-requests/">HTTP Partial Content Support</a> is added in true ServiceStack-style where it's now automatically and transparently enabled for any existing services returning:</p>

<h4>
<a id="user-content-a-physical-file" class="anchor" href="#a-physical-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A Physical File</h4>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">return</span> <span class="pl-k">new</span> HttpResult(<span class="pl-k">new</span> FileInfo(filePath), request.MimeType); </pre></div>

<h4>
<a id="user-content-a-memory-stream" class="anchor" href="#a-memory-stream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A Memory Stream</h4>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">return</span> <span class="pl-k">new</span> HttpResult(ms, <span class="pl-s"><span class="pl-pds">"</span>audio/mpeg<span class="pl-pds">"</span></span>);</pre></div>

<h4>
<a id="user-content-raw-text" class="anchor" href="#raw-text" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Raw Text</h4>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">return</span> <span class="pl-k">new</span> HttpResult(customText, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>

<p>Partial Content was also added to static file downloads served directly through ServiceStack which lets you stream mp3 downloads or should you ever want to your static .html, .css, .js, etc.</p>

<p>You can disable Partial Content support with <code>Config.AllowPartialResponses = false;</code>.</p>

<p>See the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/PartialContentResultTests.cs">PartialContentResultTests</a> for more examples.</p>

<h2>
<a id="user-content-writing-directly-to-the-response-stream" class="anchor" href="#writing-directly-to-the-response-stream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writing directly to the Response Stream</h2>

<p>In addition to returning plain C# objects, ServiceStack allows you to return any <strong>Stream</strong> or IStreamWriter (which is a bit more flexible on how you write to the response stream):</p>

<div class="highlight highlight-source-cs"><pre>    <span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">IStreamWriter</span>
    {
        <span class="pl-k">void</span> <span class="pl-en">WriteTo</span>(<span class="pl-k">Stream</span> <span class="pl-smi">stream</span>);
    }</pre></div>

<p>Both though allow you to write directly to the Response OutputStream without any additional conversion overhead.</p>

<h3>
<a id="user-content-customizing-http-headers" class="anchor" href="#customizing-http-headers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizing HTTP Headers</h3>

<p>If you want to customize the HTTP headers at the sametime you just need to implement <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Web/IHasOptions.cs">IHasOptions</a> where any Dictionary Entry is written to the Response HttpHeaders.</p>

<div class="highlight highlight-source-cs"><pre>    <span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">IHasOptions</span>
    {
        IDictionary&lt;<span class="pl-k">string</span>, <span class="pl-k">string</span>&gt; <span class="pl-en">Options</span> { <span class="pl-k">get</span>; }
    }</pre></div>

<p>Further than that, the IHttpResult allows even finer-grain control of the HTTP output (status code, headers, ...) where you can supply a custom Http Response status code. You can refer to the implementation of the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/HttpResult.cs">HttpResult</a> object for a real-world implementation of these above interfaces.</p>

<h3>
<a id="user-content-further-customizing-the-http-response" class="anchor" href="#further-customizing-the-http-response" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Further customizing the HTTP Response</h3>

<p>See the [[Customize HTTP Responses]] wiki page for more ways of customizing the HTTP Response.</p>
