<h1>
<a id="user-content-run-servicestack-in-fastcgi-hosted-on-nginx" class="anchor" href="#run-servicestack-in-fastcgi-hosted-on-nginx" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Run ServiceStack in Fastcgi hosted on nginx</h1>

<p>FastCGI is a protocol for interfacing programs with a web server. In this case we're going to interface with nginx. This guide will show you how to host a simple hello world application in nginx.</p>

<h2>
<a id="user-content-install-prerequisites" class="anchor" href="#install-prerequisites" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install prerequisites</h2>

<p>The tutorial is written using Ubuntu 12.04. At the time of writing I using the following versions.</p>

<ul>
<li>nginx - 1.1.19-1</li>
<li>mono - 2.10.8.1</li>
<li>mono-fastcgi-server4 - 2.10.0.0</li>
</ul>

<p>The easiest way to get started is using apt-get</p>

<div class="highlight highlight-source-shell"><pre>sudo apt-get install mono
sudo apt-get install mono-fastcgi-server4
sudo apt-get install nginx</pre></div>

<h2>
<a id="user-content-service-example" class="anchor" href="#service-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Service example</h2>

<p>The earlier example of <a href="https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice">Create your first webservice</a> provides us with everything we need for this demo. If you're feeling very lazy you can <a href="https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/ServiceStack.Hello">grab one of the examples.</a></p>

<h2>
<a id="user-content-nginx-configuration" class="anchor" href="#nginx-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>nginx configuration</h2>

<p>First start by editing your nginx config</p>

<div class="highlight highlight-source-shell"><pre>sudo vim /etc/nginx/sites-available/default </pre></div>

<p>replace the server tag with the following config</p>

<pre><code>server {
  listen 80; ## listen for ipv4
  location / {
    root /var/www;
      index index.html index.htm;
      fastcgi_pass unix:/tmp/SOCK-ServiceStack;
      include /etc/nginx/fastcgi_params;
  }
}
</code></pre>

<p>then restart nginx</p>

<pre><code>sudo /etc/init.d/nginx restart 
</code></pre>

<h2>
<a id="user-content-fastcgi" class="anchor" href="#fastcgi" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>fastcgi</h2>

<p>You need to launch fastcgi from within the directory that has your web.config. 
You can run fastcgi with the following command</p>

<pre><code>fastcgi-mono-server4 /applications=/:. /filename=/tmp/SOCK-ServiceStack /socket=unix
</code></pre>

<p>Alternatively you can provide the path /applications=/:/path/to/web_config_directory</p>

<p>This will run fastcgi-mono-server4 as the current user and will change the permissions on the socket to be that of the current user. You will need to setup your permissions so that the www-data group/user has read-write access to /tmp/SOCK-ServiceStack. To get up and running you can do the following</p>

<pre><code>sudo chgrp www-data /tmp/SOCK-ServiceStack
sudo chmod g+rw /tmp/SOCK-ServiceStack
</code></pre>

<p>And that's it you should be up and running. You can now visit your site running on <a href="http://localhost/hello/service%20stack%20running%20in%20mono%20on%20nginx">localhost</a> </p>

<h2>
<a id="user-content-references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h2>

<ul>
<li><a href="http://www.mono-project.com/FastCGI">Mono Fast Cgi</a></li>
<li><a href="http://www.mono-project.com/FastCGI_Nginx">Mono Fast Cgi with Nginx</a></li>
<li><a href="http://wiki.nginx.org/Main">nginx</a></li>
<li>
<a href="http://stackoverflow.com/questions/12188356/what-is-the-best-way-to-run-servicestack-on-linux-mono">What is the best way to run ServiceStack on Linux / Mono?</a> answered on <a href="http://stackoverflow.com">StackOverflow</a>
</li>
</ul>
