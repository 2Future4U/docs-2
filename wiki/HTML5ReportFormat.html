<h1>
<a id="user-content-new-javascript-html5-report-format" class="anchor" href="#new-javascript-html5-report-format" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>New JavaScript HTML5 Report Format</h1>

<h2>
<a id="user-content-new-html5--json-report-format" class="anchor" href="#new-html5--json-report-format" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>New HTML5 + JSON Report Format</h2>

<p>These examples are simply links to existing ServiceStack web services, which based on your browsers user-agent (i.e. Accept: 'text/html') provides this HTML format instead of the other serialization formats. </p>

<ul>
<li>Nortwind Database: <a href="http://northwind.servicestack.net/customers">All Customers</a>, <a href="http://northwind.servicestack.net/customers/ALFKI">Customer Detail</a>, <a href="http://northwind.servicestack.net/orders">Customer Orders</a>
</li>
<li>RedisStackOverflow:  <a href="http://redisstackoverflow.servicestack.net/questions">Latest Questions</a> and <a href="http://redisstackoverflow.servicestack.net/stats">Site Stats</a>
</li>
<li>RestFiles:  <a href="http://restfiles.servicestack.net/files">Root Directory</a>
</li>
</ul>

<p><a href="http://northwind.servicestack.net/customers/ALFKI"><img src="https://camo.githubusercontent.com/586b472a34121a6b672cd23757f8f6641d256312/687474703a2f2f6d6f6e6f2e73657276696365737461636b2e6e65742f696d672f48544d4c35466f726d61742e706e67" alt="HTML5 Report Format" data-canonical-src="http://mono.servicestack.net/img/HTML5Format.png" style="max-width:100%;"></a></p>

<p>To see it in action, <strong>view the source</strong> in your browser. Webkit and Firefox users can simply go to the url below:</p>

<pre><code>view-source:http://northwind.servicestack.net/customers/ALFKI
</code></pre>

<p>Note: To view the web services in a different format simply append <strong>?format=[json|xml|html|csv|jsv]</strong> to the query string.</p>

<h3>
<a id="user-content-the-magic-autogrid-partial" class="anchor" href="#the-magic-autogrid-partial" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/ServiceStackApps/HttpBenchmarks#the-magic-autogrid-partial">The Magic AutoGrid Partial</a>
</h3>

<p><a href="https://github.com/ServiceStack/HttpBenchmarks/blob/master/src/BenchmarksAnalyzer/Views/SearchTestResults.cshtml"><img src="https://raw.githubusercontent.com/ServiceStack/HttpBenchmarks/master/src/BenchmarksAnalyzer/Content/img/search-filter.png" alt="Search Test Results" style="max-width:100%;"></a></p>

<p>A bootstrap themed version of HTML Format is also encapsulated within an <a href="https://github.com/ServiceStack/HttpBenchmarks/blob/master/src/BenchmarksAnalyzer/Views/Shared/AutoGrid.cshtml">AutoGrid.cshtml</a>
partial which does the heavy lifting of converting any C# enumerable into a human optimized dynamic sortable datagrid with just 1 Line of Code:</p>

<div class="highlight highlight-source-cs"><pre>@Html.Partial(<span class="pl-s"><span class="pl-pds">"</span>AutoGrid<span class="pl-pds">"</span></span>, Model.Results)</pre></div>

<h3>
<a id="user-content-human-friendly-output" class="anchor" href="#human-friendly-output" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Human Friendly output</h3>

<p>The primary focus for the HTML Format is to provide a readable and semantic HTML layout letting you visualize all the data returned by your web service with a single glance.
Features include:</p>

<p>Based on convention, it generates a recursive and cascading view of your data using a combination of different sized definition lists and tables where appropriate.
After it's rendered convenience behaviour is applied allowing you to sort your tabular data, view the embedded JSON contents as well as providing links back to the original web service that generated the report including links to the other formats supported.</p>

<h3>
<a id="user-content-completely-self-contained" class="anchor" href="#completely-self-contained" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Completely self-contained</h3>

<p>The report does not have any external CSS, JavaScript or Images which also helps achieve its super-fast load-time and rendering speed.</p>

<h3>
<a id="user-content-embeds-the-complete-snapshot-of-your-web-services-data" class="anchor" href="#embeds-the-complete-snapshot-of-your-web-services-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Embeds the complete snapshot of your web services data</h3>

<p>The report embeds a complete, unaltered version of your 'JSON webservice' capturing a snapshot of the state of your data at a given point in time. 
It's perfect for backups with the same document containing a human and programatic access to the data. 
The JSON data is embedded inside a valid and well-formed document, making it programatically accessible using a standard XML/HTML parser. 
The report also includes an interface to allow humans to copy it from a textbox.</p>

<h3>
<a id="user-content-its-fast" class="anchor" href="#its-fast" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>It's Fast</h3>

<p>Like the other web services, the HTML format is just a raw C# IHttpHandler using 
<a href="http://www.servicestack.net/mythz_blog/?p=344">.NET's fastest JSON Serializer</a> 
to serialize the response DTO to a JSON string which is embedded inside a <strong>static HTML string template</strong>. 
No other .aspx page or MVC web framework is used to get in the way to slow things down.
High performance JavaScript techniques are also used to start generating the report at the earliest possible time.</p>

<h3>
<a id="user-content-well-supported-in-all-modern-browsers" class="anchor" href="#well-supported-in-all-modern-browsers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Well supported in all modern browsers</h3>

<p>It's tested and works equally well on the latest versions of Chrome, Firefox, Safari, Opera and IE9.
<a href="https://github.com/ServiceStack/ServiceStack/downloads">v1.83</a> Now works in IE8 but needs internet connection to download json2.js. (not tested in &lt;=IE7)</p>

<h3>
<a id="user-content-it-validates-as-reported-by-validatorw3org" class="anchor" href="#it-validates-as-reported-by-validatorw3org" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>It Validates (as reported by validator.w3.org)</h3>

<p>This shouldn't be important but as the technique of using JavaScript to generate the entire report is likely to ire the semantic HTML police, I thought I'd make this point. Personally I believe this style of report is more useful since it caters for both human and scripted clients.</p>

<h1>
<a id="user-content-how-it-works---view-source-reveals-all-" class="anchor" href="#how-it-works---view-source-reveals-all-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How it works - 'view-source' reveals all :)</h1>

<p>This is a new type of HTML5 report that breaks the normal conventional techniques of generating a HTML page.
Instead of using a server programming and template language to generate the HTML on the server, the data is simply embedded as JSON, unaltered inside the tag:</p>

<pre><code>&lt;script id="dto" type="text/json"&gt;{jsondto}&lt;/script&gt;
</code></pre>

<p>Because of the browser behaviour of the script tag, you can embed any markup or javascript unescaped.
Unless it has none or a 'javascript' type attribute, the browser doesn't execute it letting you to access the contents with:</p>

<pre><code>document.getElementById('dto').innerHTML
</code></pre>

<p>From there, javascript invoked just before the closing body tag (i.e. the fastest time to run DOM-altering javascript) which takes the data, 
builds up a html string and injects the generated markup in the contents of the page.</p>

<p>After the report is rendered, and because JavaScript can :) UX-friendly behaviours are applied to the document allowing the user to sort the table data on each column as well as providing an easy way to take a copy of the JSON datasource.</p>

<p>For what it does, the JavaScript is very terse considering no JavaScript framework was used. In most cases the JSON payload is a lot larger than the entire JavaScript used to render the report :)</p>

<h3>
<a id="user-content-advantages-of-a-strong-typed-code-first-web-service-framework" class="anchor" href="#advantages-of-a-strong-typed-code-first-web-service-framework" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advantages of a strong-typed, code-first web service framework</h3>

<p>Although hard to believe, most of the above web service examples were developed before ServiceStack's CSV and HTML format existed.
No code-changes were required in order to take advantage of the new formats, they were automatically available after replacing the ServiceStack.dlls with the latest version (v1.81+)</p>

<p>Being able to generically provide new features like this shows the advantage of ServiceStack's strong-typed, code-first approach to developing web services that lets you focus on your app-specific logic as you only need to return C#/.NET objects or throw C#/.NET exceptions which gets automatically handled, and hosted on a number of different endpoints in a variety of different formats.</p>

<p>Out of the box REST, RPC and SOAP endpoints types are automatically provided, in JSON, XML, CSV, JSV and now the new HTML report format above.</p>

<p>Follow <a href="http://twitter.com/demisbellot">@demisbellot</a> and <a href="http://twitter.com/ServiceStack">@ServiceStack</a> for twitter updates</p>

<p><a href="https://github.com/ServiceStack/ServiceStack/wiki">&lt;Wiki Home</a></p>
