<p>To implement a complete end-to-end HTTP Caching story you can use the cache-aware <code>CachedServiceClient</code> to enhance all existing <code>HttpWebRequest</code> based Service Clients which manages its own local cache as instructed by the Server HTTP Caching directives, whilst the <code>CachedHttpClient</code> does the same for the HttpClient-based <code>JsonHttpClient</code>.</p>

<p>Both Cache-Aware clients implement the full 
<a href="https://github.com/ServiceStack/ServiceStack/blob/master/docs/pages/IServiceClient.md">IServiceClient</a>
interface so they should be an easy drop-in enhancement for existing applications:</p>

<div class="highlight highlight-source-cs"><pre>IServiceClient client = <span class="pl-k">new</span> JsonServiceClient(baseUrl).WithCache(); 

<span class="pl-c">//equivalent to:</span>
IServiceClient client = <span class="pl-k">new</span> CachedServiceClient(<span class="pl-k">new</span> JsonServiceClient(baseUrl));</pre></div>

<p>Likewise for <code>JsonHttpClient</code>:</p>

<div class="highlight highlight-source-cs"><pre>IServiceClient client = <span class="pl-k">new</span> JsonHttpClient(baseUrl).WithCache(); 

<span class="pl-c">//equivalent to:</span>
IServiceClient client = <span class="pl-k">new</span> CachedHttpClient(<span class="pl-k">new</span> JsonHttpClient(baseUrl));</pre></div>

<p>As seen above both are decorators over existing .NET Service Clients where they'll append the appropriate HTTP Request Headers and inspect the HTTP Responses of <strong>GET</strong> Requests that contain HTTP Caching directives. All other HTTP Methods are just delegated through to the underlying Service Client.</p>

<p>The Service Clients maintain cached responses in an internal dictionary which can also be injected and shared if your app uses multiple Service Clients. For example they could use the fast binary 
<a href="https://github.com/ServiceStack/ServiceStack/wiki/MessagePack-Format">MsgPack client</a> 
for performance-sensitive queries or Services returning binary data and use a JSON client for everything else:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">var</span> sharedCache = <span class="pl-k">new</span> ConcurrentDictionary&lt;<span class="pl-k">string</span>, HttpCacheEntry&gt;();

IServiceClient msgPackClient = <span class="pl-k">new</span> MsgPackServiceClient(baseUrl).WithCache(sharedCache);

IServiceClient jsonClient = <span class="pl-k">new</span> JsonHttpClient(baseUrl).WithCache(sharedCache);</pre></div>

<h3>
<a id="user-content-improved-performance-and-reliability" class="anchor" href="#improved-performance-and-reliability" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Improved Performance and Reliability</h3>

<p>When caching is enabled on Services, the Cache-aware Service Clients can dramatically improve performance by eliminating server requests entirely as well as reducing bandwidth for re-validated requests. They also  offer an additional layer of resiliency as re-validated requests that result in Errors will transparently fallback to using pre-existing locally cached responses. For bandwidth-constrained environments like Mobile Apps they can dramatically improve the User Experience and as they're available in all supported PCL client platforms - we recommend their use where HTTP Caching is enabled on the Server.  </p>

<h2>
<a id="user-content-community-resources" class="anchor" href="#community-resources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Community Resources</h2>

<ul>
<li>
<a href="http://www.mindkin.co.nz/blog/2016/1/5/caching-anyone">Caching Anyone</a> by <a href="https://twitter.com/JezzSantos">@JezzSantos</a> </li>
</ul>
