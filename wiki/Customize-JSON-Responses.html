<p>The JSON Responses for all ServiceStack Services can be configured Globally, individually per-Service or customized per-request by the client using the <code>?jsconfig</code> QueryString modifier.</p>

<h2>
<a id="user-content-global-default-json-configuration" class="anchor" href="#global-default-json-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Global Default JSON Configuration</h2>

<p>ServiceStack uses the <a href="https://github.com/ServiceStack/ServiceStack.Text">ServiceStack.Text Serializers</a> for its built-in JSON/JSV and CSV serialization. The serialization can be customized globally by configuring the <code>JsConfig</code> or type-specific <code>JsConfig&lt;T&gt;</code> static classes with your preferred defaults, e.g:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">override</span> <span class="pl-k">void</span> Configure(Container container)
{
    JsConfig.EmitLowercaseUnderscoreNames = <span class="pl-c1">true</span>; 
    JsConfig.ExcludeDefaultValues = <span class="pl-c1">true</span>;

    JsConfig&lt;Guid&gt;.SerializeFn = guid =&gt; guid.ToString(<span class="pl-s"><span class="pl-pds">"</span>D<span class="pl-pds">"</span></span>);
    JsConfig&lt;TimeSpan&gt;.SerializeFn = time =&gt; 
        (time.Ticks &lt; <span class="pl-c1">0</span> ? <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) + time.ToString(<span class="pl-s"><span class="pl-pds">"</span>hh':'mm':'ss'.'fffffff<span class="pl-pds">"</span></span>);
}</pre></div>

<h2>
<a id="user-content-customize-json-responses-in-service" class="anchor" href="#customize-json-responses-in-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customize JSON Responses in Service</h2>

<p>The Global Defaults can be overridden on a adhoc basis by returning your Response DTO in a custom <code>HttpResult</code> configured with a custom JS Config Scope, e.g:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">return</span> <span class="pl-k">new</span> HttpResult(responseDto) {
    ResultScope = () =&gt; JsConfig.With(
        emitLowercaseUnderscoreNames:<span class="pl-c1">true</span>, excludeDefaultValues:<span class="pl-c1">true</span>)
};</pre></div>

<h2>
<a id="user-content-customize-json-responses-from-client" class="anchor" href="#customize-json-responses-from-client" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customize JSON Responses from Client</h2>

<p>The JSON and JSV Responses for all Services (inc. [[Auto Query]] Services) can also be further customized with the 
new <code>?jsconfig</code> QueryString param which lets your Service consumers customize the returned JSON Response to 
their preference. This works similar to having wrapped your Service response in a <code>HttpResult</code> with a Custom 
<code>ResultScope</code> in the Service implementation to enable non-default customization of a Services response, e.g:</p>

<pre><code>/service?jsconfig=EmitLowercaseUnderscoreNames,ExcludeDefaultValues
</code></pre>

<p>Works similarly to:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">return</span> <span class="pl-k">new</span> HttpResult(<span class="pl-k">new</span> { TheKey = <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>, Foo=<span class="pl-c1">0</span> }) {
    ResultScope = () =&gt; JsConfig.With(
        emitLowercaseUnderscoreNames:<span class="pl-c1">true</span>, excludeDefaultValues:<span class="pl-c1">true</span>)
};</pre></div>

<p>Which results in <strong>lowercase_underscore</strong> key names with any properties with <strong>default values removed</strong>:</p>

<pre><code>{"the_key":"value"}
</code></pre>

<p>It also supports cascading server and client ResultScopes, with the client <code>?jsconfig</code> taking precedence.</p>

<p>Nearly all <code>JsConfig</code> scope options are supported other than delegates and complex type configuration properties.</p>

<h3>
<a id="user-content-camel-humps-notation" class="anchor" href="#camel-humps-notation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Camel Humps Notation</h3>

<p>JsConfig also supports Camel Humps notation letting you target a configuration by just using the 
<strong>Uppercase Letters</strong> in the property name which is also case-insensitive so an equivalent shorter version 
of the above config can be:</p>

<pre><code>?jsconfig=ELUN,edv
</code></pre>

<p>Camel Humps also works with Enum Values so both these two configurations are the same:</p>

<pre><code>?jsconfig=DateHandler:UnixTime
?jsconfig=dh:ut
</code></pre>

<h3>
<a id="user-content-custom-json-live-example" class="anchor" href="#custom-json-live-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom JSON Live Example</h3>

<p><a href="https://github.com/ServiceStack/Admin">AutoQuery Viewer</a> makes use of this feature in order to return human readable dates using the new 
<code>ISO8601DateOnly</code> DateHandler Enum Value as well as appending <code>ExcludeDefaultValues</code> when specifying custom 
fields so that any unpopulated value type properties with default values are excluded from the JSON Response. 
Here's a live example of this comparing the default Response with the customized JSON Response:</p>

<ul>
<li><a href="http://github.servicestack.net/repos.json?fields=Name,Homepage,Language,Updated_At">http://github.servicestack.net/repos.json?fields=Name,Homepage,Language,Updated_At</a></li>
<li><a href="http://github.servicestack.net/repos.json?fields=Name,Homepage,Language,Updated_At&amp;jsconfig=edv,dh:iso8601do">http://github.servicestack.net/repos.json?fields=Name,Homepage,Language,Updated_At&amp;jsconfig=edv,dh:iso8601do</a></li>
</ul>

<h3>
<a id="user-content-custom-json-settings" class="anchor" href="#custom-json-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom JSON Settings</h3>

<p>The presence of a <strong>bool</strong> configuration property will be set to <code>true</code> unless they have a <code>false</code> or <code>0</code> 
value in which case they will be set to <code>false</code>, e.g:</p>

<pre><code>?jsconfig=ExcludeDefaultValues:false
</code></pre>

<p>For a quick reference the following <strong>bool</strong> customizations are supported:</p>

<table>
    <thead>
        <tr>
<th>Name</th>
<th>Alias</th>
</tr>
    </thead>
    <tr>
<td>EmitCamelCaseNames</td>
<td>eccn</td>
</tr>
    <tr>
<td>EmitLowercaseUnderscoreNames</td>
<td>elun</td>
</tr>
    <tr>
<td>IncludeNullValues</td>
<td>inv</td>
</tr>
    <tr>
<td>IncludeNullValuesInDictionaries</td>
<td>invid</td>
</tr>
    <tr>
<td>IncludeDefaultEnums</td>
<td>ide</td>
</tr>
    <tr>
<td>IncludePublicFields</td>
<td>ipf</td>
</tr>
    <tr>
<td>IncludeTypeInfo</td>
<td>iti</td>
</tr>
    <tr>
<td>ExcludeTypeInfo</td>
<td>eti</td>
</tr>
    <tr>
<td>ConvertObjectTypesIntoStringDictionary</td>
<td>cotisd</td>
</tr>
    <tr>
<td>TreatEnumAsInteger</td>
<td>teai</td>
</tr>
    <tr>
<td>TryToParsePrimitiveTypeValues</td>
<td>ttpptv</td>
</tr>
    <tr>
<td>TryToParseNumericType</td>
<td>ttpnt</td>
</tr>
    <tr>
<td>ThrowOnDeserializationError</td>
<td>tode</td>
</tr>
    <tr>
<td>EscapeUnicode</td>
<td>eu</td>
</tr>
    <tr>
<td>PreferInterfaces</td>
<td>pi</td>
</tr>
    <tr>
<td>SkipDateTimeConversion</td>
<td>sdtc</td>
</tr>
    <tr>
<td>AlwaysUseUtc</td>
<td>auu</td>
</tr>
    <tr>
<td>AssumeUtc</td>
<td>au</td>
</tr>
    <tr>
<td>AppendUtcOffset</td>
<td>auo</td>
</tr>
    <tr><th colspan="2">DateHandler (dh)</th></tr>
    <tr>
<td>TimestampOffset</td>
<td>to</td>
</tr>
    <tr>
<td>DCJSCompatible</td>
<td>dcjsc</td>
</tr>
    <tr>
<td>ISO8601</td>
<td>iso8601</td>
</tr>
    <tr>
<td>ISO8601DateOnly</td>
<td>iso8601do</td>
</tr>
    <tr>
<td>ISO8601DateTime</td>
<td>iso8601dt</td>
</tr>
    <tr>
<td>RFC1123</td>
<td>rfc1123</td>
</tr>
    <tr>
<td>UnixTime</td>
<td>ut</td>
</tr>
    <tr>
<td>UnixTimeMs</td>
<td>utm</td>
</tr>
    <tr><th colspan="2">TimeSpanHandler (tsh)</th></tr>
    <tr>
<td>DurationFormat</td>
<td>df</td>
</tr>
    <tr>
<td>StandardFormat</td>
<td>sf</td>
</tr>
    <tr><th colspan="2">PropertyConvention (pc)</th></tr>
    <tr>
<td>Strict</td>
<td>s</td>
</tr>
    <tr>
<td>Lenient</td>
<td>l</td>
</tr>
</table>

<h4>
<a id="user-content-create-custom-scopes-using-string-config" class="anchor" href="#create-custom-scopes-using-string-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create Custom Scopes using String config</h4>

<p>You can also create a scope from a string manually using <code>JsConfig.CreateScope()</code>, e.g:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">using</span> (JsConfig.CreateScope("EmitLowercaseUnderscoreNames,ExcludeDefaultValues,dh:ut")) 
{
    <span class="pl-k">var</span> json = dto.ToJson();
}</pre></div>

<p>If you don't wish for consumers to be able to customize JSON responses this feature can be disabled with 
<code>Config.AllowJsConfig=false</code>.</p>
